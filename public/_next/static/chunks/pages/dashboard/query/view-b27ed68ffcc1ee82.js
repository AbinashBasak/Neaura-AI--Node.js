(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{4333:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/query/view",function(){return r(2308)}])},6597:function(e,a,r){"use strict";r.d(a,{RM:function(){return i},SC:function(){return o},iA:function(){return d},pj:function(){return u},ss:function(){return c},xD:function(){return n}});var t=r(5893),l=r(7294),s=r(2676);let d=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,s.cn)("w-full caption-bottom text-sm",r),...l})})});d.displayName="Table";let n=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("thead",{ref:a,className:(0,s.cn)("[&_tr]:border-b",r),...l})});n.displayName="TableHeader";let i=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...l})});i.displayName="TableBody",l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,s.cn)("border-t bg-gray-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-gray-800/50",r),...l})}).displayName="TableFooter";let o=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("tr",{ref:a,className:(0,s.cn)("transition-colors border-b border-gray-200 dark:border-gray-800 hover:bg-gray-100/50 data-[state=selected]:bg-gray-100 dark:hover:bg-gray-800/50 dark:data-[state=selected]:bg-gray-800",r),...l})});o.displayName="TableRow";let c=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("th",{ref:a,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0 dark:text-gray-400",r),...l})});c.displayName="TableHead";let u=l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("td",{ref:a,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...l})});u.displayName="TableCell",l.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("caption",{ref:a,className:(0,s.cn)("mt-4 text-sm text-gray-500 dark:text-gray-400",r),...l})}).displayName="TableCaption"},2308:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return u}});var t=r(5893),l=r(7294),s=r(3044),d=r(5121),n=r(1163),i=r(3749),o=r(6597);function c(e){let{data:a}=e;if(!a)return null;if("jsonString"===a.type)return(0,t.jsx)("code",{className:"flex items-center justify-between rounded-md border border-gray-200 dark:border-gray-800 p-4",children:a.data});if("string"===a.type)return(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-md border border-gray-200 dark:border-gray-800 p-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none  capitalize",children:a.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground capitalize",children:a.data})]});if("list"===a.type){var r,l,s;return(0,t.jsxs)("div",{className:"rounded-md border border-gray-200 dark:border-gray-800 p-4",children:[(0,t.jsx)("p",{className:"font-semibold tracking-tight text-xl capitalize mb-3",children:a.name}),(0,t.jsxs)(o.iA,{className:"rounded-md border border-gray-200 dark:border-gray-800",children:[(0,t.jsx)(o.xD,{children:(0,t.jsx)(o.SC,{className:"bg-gray-300 dark:bg-gray-900",children:null===(r=a.colNames)||void 0===r?void 0:r.map(e=>(0,t.jsx)(o.ss,{className:"text-lg text-gray-700 dark:text-gray-100 capitalize",children:e},e))})}),(0,t.jsx)(o.RM,{children:null===(s=a.data)||void 0===s?void 0:null===(l=s.map)||void 0===l?void 0:l.call(s,(e,r)=>{var l;return(0,t.jsx)(o.SC,{children:null===(l=a.colNames)||void 0===l?void 0:l.map(a=>(0,t.jsx)(o.pj,{className:"text-sm text-gray-500 dark:text-gray-400",children:e[a]},a))},r)})})]})]})}return null}function u(){let[e,a]=(0,l.useState)([]),[r,o]=(0,l.useState)([]),[u,f]=(0,l.useState)([]),m=(0,n.useRouter)(),[y,x]=(0,l.useState)({}),p=e=>{try{let a=JSON.parse(e);return"string"==typeof a&&(a=JSON.parse(a)),a}catch(e){}try{return JSON.parse(e.replace("/\n",""))}catch(e){console.log(e)}return{}},g=e=>{try{let r=[],t=p(e);"string"==typeof t?r.push({type:"jsonString",data:t,name:""}):Object.keys(t).forEach(e=>{let a;if("string"==typeof t[e]){r.push({type:"string",data:t[e],name:e});return}a=Array.isArray(t[e])?t[e]:[t[e]];let l={},s={type:"list",name:e.replace(/_/g," "),data:a.map(e=>(Object.keys(e).forEach(e=>{l[e]=!0}),e))};r.push({...s,colNames:Object.keys(l)})}),a(r)}catch(e){console.log(e)}},h=e=>{try{let a=[],r=p(e);"string"==typeof r?a.push({type:"jsonString",data:r,name:""}):Object.keys(r).forEach(e=>{let t;if("string"==typeof r[e]){a.push({type:"string",data:r[e],name:e});return}t=Array.isArray(r[e])?r[e]:[r[e]];let l={},s={type:"list",name:e.replace(/_/g," "),data:t.map(e=>(Object.keys(e).forEach(e=>{l[e]=!0}),e))};a.push({...s,colNames:Object.keys(l)})}),o(a)}catch(e){}},j=e=>{try{let a=[],r=p(e);"string"==typeof r?a.push({type:"jsonString",data:r,name:""}):Object.keys(r).forEach(e=>{let t;if("string"==typeof r[e]){a.push({type:"string",data:r[e],name:e});return}t=Array.isArray(r[e])?r[e]:[r[e]];let l={},s={type:"list",name:e.replace(/_/g," "),data:t.map(e=>(Object.keys(e).forEach(e=>{l[e]=!0}),e))};a.push({...s,colNames:Object.keys(l)})}),f(a)}catch(e){console.log(e)}};return(0,l.useEffect)(()=>{async function e(e){try{var a,r,t,l,s,n;let i=await d.Z.get("/query/group-id?groupid=".concat(e));if(!i.data.data)return;(null===(r=i.data.data.remidiaotion)||void 0===r?void 0:null===(a=r.result)||void 0===a?void 0:a.length)&&g(i.data.data.remidiaotion.result),(null===(l=i.data.data.rules)||void 0===l?void 0:null===(t=l.result)||void 0===t?void 0:t.length)&&h(i.data.data.rules.result),(null===(n=i.data.data.sql)||void 0===n?void 0:null===(s=n.result)||void 0===s?void 0:s.length)&&j(i.data.data.sql.result),i.data.data.remidiaotion.isError&&x(e=>({...e,remidiaotion:i.data.data.remidiaotion.errorMessage})),i.data.data.rules.isError&&x(e=>({...e,rules:i.data.data.rules.errorMessage})),i.data.data.sql.isError&&x(e=>({...e,sql:i.data.data.sql.errorMessage}))}catch(e){}}m.query.groupId&&e(m.query.groupId)},[m.query.groupId]),(0,t.jsxs)(s.Z,{children:[(0,t.jsx)("div",{className:"w-full h-full flex justify-center",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(i.Zb,{className:"w-full",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-xl",children:"Remediation"})}),(0,t.jsxs)(i.aY,{className:"flex flex-col gap-3",children:[y.remidiaotion?y.remidiaotion:null,e.map((e,a)=>(0,t.jsx)(c,{data:e},a))]})]})})}),(0,t.jsx)("div",{className:"w-full h-full flex justify-center",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(i.Zb,{className:"w-full",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-xl",children:"Rules"})}),(0,t.jsxs)(i.aY,{className:"flex flex-col gap-3",children:[y.rules?y.rules:null,r.map((e,a)=>(0,t.jsx)(c,{data:e},a))]})]})})}),(0,t.jsx)("div",{className:"w-full h-full flex justify-center",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(i.Zb,{className:"w-full",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-xl",children:"SQL"})}),(0,t.jsxs)(i.aY,{className:"flex flex-col gap-3",children:[y.sql?y.sql:null,u.map((e,a)=>(0,t.jsx)(c,{data:e},a))]})]})})})]})}}},function(e){e.O(0,[570,504,443,888,774,179],function(){return e(e.s=4333)}),_N_E=e.O()}]);